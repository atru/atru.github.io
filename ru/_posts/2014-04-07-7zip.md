---
layout: post
title:  "Архивируем строки в MS SQL с помощью 7zip"
captitle:  "Архивируем строки в MS SQL с помощью 7zip"
date:   2014-04-07 17:14:48
categories: MSSQL
tags: sql clr
lang: ru
---

На мгновение представим, что нужно хранить большие порции данных в MS SQL. Не файлами на диске, а простые длинные строки неких технологических данных, слепленных из каких-нибудь массивов. Так что данные часто повторяются в пределах строки. Задача - сжать с помощью архиватора. Без права выбора.

7zip + MS SQL = Друзья
======================

Поскольку 7zip является открытым, нетрудно найти [проект на .NET][7zip], реализующий архиватор. Мы оборачиваем этот архиватор в CLR для MS SQL.

В результате получаем следующее:

<img width="100%" alt="Сжали строку" src="/img/2014/7zip.png" style="cursor:pointer" onclick="window.open('/img/2014/7zip.png','_blank');return;"></img>

Нелепая строка упаковалась в 18 процентов исходного размера. Если строка представляет собой склеенные числовые значения &mdash; она ужимается не менее успешно.

Инструкции?
=====================

Не стесняйтесь использовать и [разбирать][dll].

[dll]: https://github.com/atru/database-dll/tree/master/7zip-dll
[7zip]: http://sevenzipsharp.codeplex.com/
